<!DOCTYPE html>
<html lang="vi">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Video Splits</title>
		<link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" href="{{ url_for('static', filename='css/global.css') }}">
		<!-- Thêm Font Awesome -->
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
	</head>
	<body>
		{% include 'header.html' %}
		{% include 'message.html' %}
		<div class="container mt-5">
			<h1 class="text-center mb-4">Danh Sách Các Phần Video</h1>

			<!-- Form để chọn trang và video -->
			<form method="POST" action="{{ url_for('video_split.add_to_schedule') }}">
				{{ form.csrf_token }} <!-- CSRF token -->
				<!-- Dropdown chọn page -->
				<div class="mb-3">
					<label for="page_select" class="form-label">Chọn Trang</label>
					<select id="page_select" name="page_id" class="form-select">
						<!-- Thay {{ pages }} bằng danh sách các trang của bạn -->
						{% for page in pages %}
						<option value="{{ page.page_id }}">{{ page.name }}</option>
						{% endfor %}
					</select>
				</div>

				<!-- Bảng hiển thị phần video -->
				<table class="table table-bordered table-striped">
					<thead class="table-light">
						<tr>
							<th><input type="checkbox" id="select_all"> All</th> <!-- Checkbox chọn tất cả -->
							<th>ID</th>
							<th>Tiêu Đề</th>
							<th>Thời Gian (giây)</th>
						</tr>
					</thead>
					<tbody>
						{% for split in video_splits %}
						<tr>
							<td>
								<input type="checkbox" name="selected_splits" value="{{ split.id }}">
							</td>
							<td>{{ split.id }}</td>
							<td>{{ split.title }}</td>
							<td>{{ split.duration }}</td>
						</tr>
						{% else %}
						<tr>
							<td colspan="4" class="text-center">Không có phần video nào.</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>

				<!-- Nút để gửi form -->
				<button type="submit" class="btn btn-primary">Thêm vào lịch phát hành</button>
			</form>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-OgVRvuATP1z7JjHLkuOU63t63E9UK9R1DlmAy1UoZlZpkjr/ZpZqgs3bzAv29ZjX"
			crossorigin="anonymous"></script>
		<script>
			// JavaScript để chọn/deselect tất cả checkbox
			document.getElementById('select_all').addEventListener('click', function (e) {
				const checkboxes = document.querySelectorAll('input[name="selected_splits"]');
				checkboxes.forEach(checkbox => {
					checkbox.checked = e.target.checked;
				});
			});
		</script>
	</body>
</html>