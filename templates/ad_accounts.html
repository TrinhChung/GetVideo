<!-- templates/ad_accounts.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ... head content như cũ ... -->
</head>
<body>
  {% include 'header.html' %}
  {% include 'message.html' %}

  <div class="container mt-5">
    <h1 class="text-dark mb-4">Ad Account List</h1>

    {% if ad_accounts %}
    <table class="table table-hover table-bordered">
      <thead class="table-dark">
        <tr>
          <th>#</th>
          <th>Account Name</th>
          <th>Account ID</th>
          <th>Status</th>
          <th>Balance</th>
          <th>Amount Spent</th>
          <th>Spend Limit</th>
          <th>Business</th>
          <th>Created Date</th>
          <th>View</th>  <!-- Thêm cột View -->
        </tr>
      </thead>
      <tbody>
        {% for account in ad_accounts %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ account.name }}</td>
          <td>{{ account.facebook_ad_account_id }}</td>
          <td>
            {% if account.account_status == 1 %}
              <span class="badge bg-success">Active</span>
            {% elif account.account_status == 2 %}
              <span class="badge bg-warning text-dark">Inactive</span>
            {% else %}
              <span class="badge bg-danger">Locked</span>
            {% endif %}
          </td>
          <td>{{ "{:,.0f}".format(account.balance or 0) }} {{ account.currency }}</td>
          <td>{{ "{:,.0f}".format(account.amount_spent or 0) }} {{ account.currency }}</td>
          <td>{{ "{:,.0f}".format(account.spend_cap) if account.spend_cap else "Unlimited" }}</td>
          <td>{{ account.business_name or "N/A" }}</td>
          <td>{{ account.created_time.strftime('%d-%m-%Y') if account.created_time else "N/A" }}</td>
          <td>
            <!-- Link "View" sẽ dẫn đến route hiển thị chi tiết quảng cáo cho tài khoản này -->
            <a href="{{ url_for('ads_manager.view_ads', account_id=account.facebook_ad_account_id) }}" class="btn btn-primary btn-sm">View</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
      <div class="alert alert-info">No ad accounts found</div>
    {% endif %}
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
